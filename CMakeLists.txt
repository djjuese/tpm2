# SPDX-License-Identifier: Apache-2.0

if(CONFIG_TPM2)
  zephyr_include_directories(
    ${CMAKE_CURRENT_SOURCE_DIR}/include
    )

  zephyr_library()
  
  zephyr_library_sources(
    src/ACTCommands.c
    src/ACT_spt.c
    src/AlgorithmCap.c
    src/AlgorithmTests.c
    src/AsymmetricCommands.c
    src/Attest_spt.c
    src/AttestationCommands.c
    src/AuditCommands.c
    src/Bits.c
    src/BnConvert.c
    src/BnMath.c
    src/BnMemory.c
    src/Cancel.c
    src/CapabilityCommands.c
    src/Clock.c
    src/ClockCommands.c
    src/CommandAudit.c
    src/CommandCodeAttributes.c
    src/CommandDispatcher.c
    src/ContextCommands.c
    src/Context_spt.c
    src/CryptDes.c
    src/CryptCmac.c
    src/CryptEccCrypt.c
    src/CryptEccData.c
    src/CryptEccKeyExchange.c
    src/CryptEccMain.c
    src/CryptEccSignature.c
    src/CryptHash.c
    src/CryptPrime.c
    src/CryptPrimeSieve.c
    src/CryptRand.c
    src/CryptRsa.c
    src/CryptSelfTest.c
    src/CryptSmac.c
    src/CryptSym.c
    src/CryptUtil.c
    src/DA.c
    src/DebugHelpers.c
    src/DictionaryCommands.c
    src/DuplicationCommands.c
    src/EACommands.c
    src/EncryptDecrypt_spt.c
    src/Entity.c
    src/Entropy.c
    src/EphemeralCommands.c
    src/ExecCommand.c
    src/Global.c
    src/Handle.c
    src/HashCommands.c
    src/Hierarchy.c
    src/HierarchyCommands.c
    src/IoBuffers.c
    src/IntegrityCommands.c
    src/Locality.c
    src/LocalityPlat.c
    src/ManagementCommands.c
    src/Manufacture.c
    src/Marshal.c
    src/MathOnByteBuffers.c
    src/Memory.c
    src/NVCommands.c
    src/NVDynamic.c
    src/NV_Mem.c
    src/NVMem.c
    src/NVReserved.c
    src/NV_spt.c
    src/Object.c
    src/ObjectCommands.c
    src/Object_spt.c
    src/PCR.c
    src/PP.c
    src/PPPlat.c
    src/PlatformACT.c
    src/PlatformData.c
    src/Policy_spt.c
    src/Power.c
    src/PowerPlat.c
    src/PrimeData.c
    src/PropertyCap.c
    src/RandomCommands.c
    src/Response.c
    src/ResponseCodeProcessing.c
    src/RsaKeyCache.c
    src/RunCommand.c
    src/Session.c
    src/SessionCommands.c
    src/SessionProcess.c
    src/SigningCommands.c
    src/StartupCommands.c
    src/SymmetricCommands.c
    src/TPMCmdp.c
    src/TestingCommands.c
    src/Ticket.c
    src/Time.c
    src/TpmAsn1.c
    src/TpmFail.c
    src/TpmSizeChecks.c
    src/TpmToOsslDesSupport.c
    src/TpmToOsslMath.c
    src/TpmToOsslSupport.c
    src/Unique.c
    src/Unmarshal.c
    src/Vendor_TCG_Test.c
    src/X509_ECC.c
    src/X509_RSA.c
    src/X509_spt.c
    )

  zephyr_library_compile_options(
    -Wall
    -Wmissing-declarations 
    -Wmissing-prototypes 
    -Wnested-externs
    -Wno-deprecated-declarations
    -DTPM_POSIX
    -D_POSIX_
    -DROSELAND_TCM2_COMPLIANCE_LOG 
    -DROSELAND_TCM2_DEBUG_LOG
    )
endif() 